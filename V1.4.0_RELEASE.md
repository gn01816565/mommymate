# MommyMate v1.4.0 - 深色模式 + PWA 🎉

## 🌙 深色模式

### 新增功能
- **自動深色模式切換**
  - 導航欄右上角的 ☀️/🌙 按鈕
  - 一鍵切換深色/淺色模式
  
- **智能偏好記憶**
  - 自動儲存使用者選擇
  - 下次訪問自動套用
  - 支援系統偏好偵測

- **深色樣式**
  - ✅ App 主體
  - ✅ 導航欄
  - ✅ 時間軸（Timeline）
  - ✅ 詳細資訊（DetailView 部分）
  - ✅ 手機版選單
  - ⏳ 其他組件（持續完善中）

### 技術實作
- 使用 Tailwind `dark:` 類別
- `darkMode: 'class'` 配置
- `localStorage` 持久化
- `prefers-color-scheme` 偵測
- CSS transition 平滑過渡

---

## 📱 PWA 支援

### 新增功能
- **可安裝到主畫面**
  - iOS Safari：分享 → 加入主畫面
  - Android Chrome：安裝應用程式
  - 桌面版：網址列「安裝」圖示

- **離線支援**
  - Service Worker 快取
  - 離線時可載入主頁面
  - 漸進式 Web 應用

- **原生應用體驗**
  - 全螢幕顯示（standalone）
  - 自訂主題顏色
  - 應用程式圖示

### 技術實作
- `manifest.json` PWA 清單
- `sw.js` Service Worker
- Cache API
- Apple meta tags

---

## ✨ 使用體驗

### 深色模式
```
1. 點擊右上角 🌙 按鈕
2. 自動切換為深色模式
3. 再點一次 ☀️ 切回淺色
4. 設定會自動記住
```

### 安裝 PWA

**iOS (iPhone/iPad)：**
1. 用 Safari 打開 https://showgan.com/mommymate/
2. 點擊分享按鈕 📤
3. 選擇「加入主畫面」
4. 點擊「新增」

**Android：**
1. 用 Chrome 打開 https://showgan.com/mommymate/
2. 點擊「安裝應用程式」提示
3. 或點選選單 → 安裝應用程式

**桌面版（Chrome/Edge）：**
1. 網址列右側會出現「安裝」圖示
2. 點擊安裝
3. 可在桌面/應用程式列表找到

---

## 🎨 深色模式設計

### 顏色方案
**淺色模式：**
- 背景：粉紅漸層 (#fdf2f8 → #dbeafe)
- 卡片：白色 (#ffffff)
- 文字：深灰 (#374151)

**深色模式：**
- 背景：深灰漸層 (#111827 → #1f2937)
- 卡片：深灰 (#1f2937)
- 文字：淺灰 (#e5e7eb)

### 對比度
- WCAG AA 標準
- 所有文字清晰可讀
- 按鈕高對比

---

## 📊 效能

### PWA 優勢
- ⚡ 更快的載入速度
- 💾 減少網路請求
- 📱 類原生應用體驗
- 🔌 離線可用

### Service Worker 快取
- 主頁面（index.html）
- Favicon
- 其他靜態資源

---

## 🐛 已知限制

### 深色模式
- ⚠️ DetailView 某些部分尚未完全適配
- ⚠️ 模態視窗（NutritionGuide等）需要調整
- ⚠️ ChatWidget 深色樣式待完善

**解決方案：** 將在 v1.4.1 繼續完善

### PWA
- 📸 目前使用 SVG 圖示（部分裝置可能不支援）
- 📱 建議未來生成 PNG 圖示（192x192, 512x512）

---

## 🔄 升級指南

### 從 v1.3.x 升級
1. 強制刷新頁面（Cmd/Ctrl + Shift + R）
2. 檢查右上角是否出現 🌙 按鈕
3. 測試深色模式切換
4. 測試 PWA 安裝

### 清除快取
如果深色模式不正常：
```javascript
// 在 DevTools Console 執行
localStorage.clear()
location.reload()
```

---

## 📝 後續計畫

### v1.4.1 (近期)
- 完善所有組件深色樣式
- 生成 PNG PWA 圖示
- 深色模式動畫優化

### v1.5.0 (中期)
- 多語言支援（繁中 + 英文）
- 語言切換按鈕

### v1.6.0 (未來)
- 深色模式自動切換（日落/日出）
- PWA 推送通知
- 離線資料儲存

---

## 🧪 測試檢查清單

### 深色模式
- [ ] 點擊切換按鈕運作正常
- [ ] localStorage 記住選擇
- [ ] 時間軸顏色正確
- [ ] 卡片背景正確
- [ ] 文字清晰可讀

### PWA
- [ ] manifest.json 可存取
- [ ] Service Worker 註冊成功
- [ ] 可安裝到主畫面
- [ ] 全螢幕模式正常
- [ ] 離線可載入

---

## 🙏 回饋

發現問題或有建議？
- GitHub Issues: https://github.com/gn01816565/mommymate/issues
- Email: [your-email]

---

**v1.4.0 is live!** 🚀
